<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Liste des administrateurs</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #007bff, #00c6ff);
      /* padding: 40px; */
      margin: 0;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: rgba(255, 255, 255, 0.95);
      padding: 30px;
      margin-top: 50px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transform: translateY(0);
      transition: all 0.4s ease;
    }

    .container:hover {
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    h1 {
      text-align: center;
      color: #333;
      position: relative;
      padding-bottom: 15px;
    }

    h1::after {
      content: '';
      display: block;
      width: 80px;
      height: 3px;
      background: #007bff;
      margin: 10px auto 0;
      transition: width 0.3s ease;
    }

    .container:hover h1::after {
      width: 120px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }

    th, td {
      padding: 15px;
      border: none;
      text-align: left;
      transition: all 0.3s ease;
    }

    th {
      background-color: #007bff;
      color: white;
      position: sticky;
      top: 0;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    tr {
      background-color: rgba(255, 255, 255, 0.9);
    }

    tr:nth-child(even) {
      background-color: rgba(242, 242, 242, 0.9);
    }

    tr:hover td {
      background-color: rgba(0, 123, 255, 0.1);
      transform: translateX(5px);
    }

    .btn-ajout {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      padding: 12px 25px;
      background-color: #28a745;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .btn-ajout:hover {
      background-color: #218838;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .btn-ajout:active {
      transform: translateY(0);
    }

    .btn-ajout::before {
      content: '‚ûï';
      margin-right: 8px;
      transition: transform 0.3s ease;
    }

    .btn-ajout:hover::before {
      transform: scale(1.2);
    }

    .empty-message {
      text-align: center;
      padding: 20px;
      color: #666;
      font-style: italic;
    }

    .actions-cell {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      padding: 6px 12px;
      border-radius: 4px;
      color: white;
      text-decoration: none;
      font-size: 0.9em;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .edit-btn {
      background-color: #ffc107;
    }

    .edit-btn:hover {
      background-color: #e0a800;
    }

    .delete-btn {
      background-color: #dc3545;
    }

    .delete-btn:hover {
      background-color: #c82333;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.8em;
      font-weight: bold;
      color: white;
    }

    .status-active {
      background-color: #28a745;
    }

    .status-inactive {
      background-color: #6c757d;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    tbody tr {
      animation: fadeIn 0.5s ease forwards;
      opacity: 0;
    }

    tbody tr:nth-child(1) { animation-delay: 0.1s; }
    tbody tr:nth-child(2) { animation-delay: 0.2s; }
    tbody tr:nth-child(3) { animation-delay: 0.3s; }
    tbody tr:nth-child(4) { animation-delay: 0.4s; }
    tbody tr:nth-child(5) { animation-delay: 0.5s; }
    tbody tr:nth-child(n+6) { animation-delay: 0.6s; }

    .search-container {
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .search-box {
      flex: 1;
      min-width: 250px;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .search-box:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
    }

    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      gap: 5px;
    }

    .page-btn {
      padding: 8px 15px;
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      color: #007bff;
      text-decoration: none;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    .page-btn:hover {
      background-color: #e9ecef;
    }

    .page-btn.active {
      background-color: #007bff;
      color: white;
      border-color: #007bff;
    }
  </style>
</head>
<body>

    <%- include('./composants/deepnav.ejs') %>
  <div class="container">
    <h1>Liste des Administrateurs</h1>

    <div class="search-container">
      <a href="/admin/nouveau" class="btn-ajout">Ajouter un administrateur</a>
      <input type="text" class="search-box" placeholder="Rechercher un administrateur...">
    </div>

    <table>
      <thead>
        <tr>
          <th>Nom</th>
          <th>Email</th>
          <th>R√¥le</th>
          <th>Date d'inscription</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if (admins.length > 0) { %>
          <% admins.forEach(admin => { %>
            <tr>
              <td><%= admin.nom %></td>
              <td><%= admin.email %></td>
              <td><%= admin.role %></td>
              <td><%= new Date(admin.createdAt).toLocaleDateString("fr-FR", { day: '2-digit', month: '2-digit', year: 'numeric' }) %></td>
              <td>
                <span class="status-badge <%= admin.active ? 'status-active' : 'status-inactive' %>">
                  <%= admin.active ? 'Actif' : 'Inactif' %>
                </span>
              </td>
              <td class="actions-cell">
                <a href="/admin/edit" class="action-btn edit-btn">‚úèÔ∏è Modifier</a>
                <a href="/admin/supprimer/<%= admin._id %>" class="action-btn delete-btn">üóëÔ∏è Supprimer</a>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="6" class="empty-message">Aucun administrateur trouv√©.</td>
          </tr>
        <% } %>
      </tbody>
    </table>

    <% if (totalPages > 1) { %>
      <div class="pagination">
        <% for (let i = 1; i <= totalPages; i++) { %>
          <a href="?page=<%= i %>" class="page-btn <%= currentPage === i ? 'active' : '' %>"><%= i %></a>
        <% } %>
      </div>
    <% } %>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Animation au survol des lignes
      const rows = document.querySelectorAll('tbody tr');
      rows.forEach(row => {
        row.addEventListener('mouseenter', function() {
          this.style.transform = 'scale(1.01)';
        });
        
        row.addEventListener('mouseleave', function() {
          this.style.transform = 'scale(1)';
        });
      });

      // Fonction de recherche
      const searchBox = document.querySelector('.search-box');
      searchBox.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const rows = document.querySelectorAll('tbody tr');
        
        rows.forEach(row => {
          const cells = row.querySelectorAll('td');
          let matches = false;
          
          cells.forEach(cell => {
            if (cell.textContent.toLowerCase().includes(searchTerm)) {
              matches = true;
            }
          });
          
          if (matches) {
            row.style.display = '';
          } else {
            row.style.display = 'none';
          }
        });
      });

      // Confirmation avant suppression
      const deleteButtons = document.querySelectorAll('.delete-btn');
      deleteButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          if (!confirm('√ätes-vous s√ªr de vouloir supprimer cet administrateur ?')) {
            e.preventDefault();
          }
        });
      });
    });
  </script>
</body>
</html>